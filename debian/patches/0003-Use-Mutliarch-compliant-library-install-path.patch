From e8e4a42c8b32dab5da71cbeed87ee02b7a9ec232 Mon Sep 17 00:00:00 2001
From: Ole Streicher <debian@liska.ath.cx>
Date: Wed, 5 Feb 2014 09:15:10 +0900
Subject: Use Mutliarch compliant library install path

Bug: http://code.google.com/p/casacore/issues/detail?id=55
---
 CMakeLists.txt              | 3 +++
 casa/CMakeLists.txt         | 2 +-
 components/CMakeLists.txt   | 2 +-
 coordinates/CMakeLists.txt  | 2 +-
 derivedmscal/CMakeLists.txt | 2 +-
 fits/CMakeLists.txt         | 2 +-
 images/CMakeLists.txt       | 2 +-
 lattices/CMakeLists.txt     | 2 +-
 meas/CMakeLists.txt         | 2 +-
 measures/CMakeLists.txt     | 2 +-
 mirlib/CMakeLists.txt       | 2 +-
 ms/CMakeLists.txt           | 2 +-
 msfits/CMakeLists.txt       | 2 +-
 scimath/CMakeLists.txt      | 2 +-
 scimath_f/CMakeLists.txt    | 2 +-
 tables/CMakeLists.txt       | 2 +-
 16 files changed, 18 insertions(+), 15 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index d1e41b7..cd9f861 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -66,6 +66,9 @@ option (USE_FFTW3 "" NO)
 option (USE_THREADS "" NO)
 option (USE_OPENMP "" NO)
 
+# By default do not use Multi-Arch
+option (LIBRARY_OUTPUT_PATH "" lib)
+
 # Define the compiler flags to be used.
 # Note: -Wshadow and -Wunreachable-code give (too) many warnings.
 # Casacore uses longlong, so no warnings for it.
diff --git a/casa/CMakeLists.txt b/casa/CMakeLists.txt
index 9478b6b..c6f95f1 100644
--- a/casa/CMakeLists.txt
+++ b/casa/CMakeLists.txt
@@ -209,7 +209,7 @@ dl
 
 install (
 TARGETS casa_casa
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/components/CMakeLists.txt b/components/CMakeLists.txt
index 3256d74..e151117 100644
--- a/components/CMakeLists.txt
+++ b/components/CMakeLists.txt
@@ -42,7 +42,7 @@ target_link_libraries (casa_components casa_coordinates)
 install (
 TARGETS casa_components
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/coordinates/CMakeLists.txt b/coordinates/CMakeLists.txt
index 3aaab8d..ae7b9d2 100644
--- a/coordinates/CMakeLists.txt
+++ b/coordinates/CMakeLists.txt
@@ -25,7 +25,7 @@ target_link_libraries (casa_coordinates casa_fits ${WCSLIB_LIBRARIES})
 
 install (TARGETS casa_coordinates
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/derivedmscal/CMakeLists.txt b/derivedmscal/CMakeLists.txt
index 5d6567e..412d421 100644
--- a/derivedmscal/CMakeLists.txt
+++ b/derivedmscal/CMakeLists.txt
@@ -14,7 +14,7 @@ target_link_libraries (casa_derivedmscal casa_ms)
 
 install (TARGETS casa_derivedmscal
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/fits/CMakeLists.txt b/fits/CMakeLists.txt
index a4e748b..ca903ac 100644
--- a/fits/CMakeLists.txt
+++ b/fits/CMakeLists.txt
@@ -34,7 +34,7 @@ endif (BUILD_TESTING)
 
 install (TARGETS casa_fits
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/images/CMakeLists.txt b/images/CMakeLists.txt
index 6e3716e..1d9603a 100644
--- a/images/CMakeLists.txt
+++ b/images/CMakeLists.txt
@@ -73,7 +73,7 @@ add_subdirectory (apps)
 install (
 TARGETS casa_images
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/lattices/CMakeLists.txt b/lattices/CMakeLists.txt
index 4a19442..e82cfe9 100644
--- a/lattices/CMakeLists.txt
+++ b/lattices/CMakeLists.txt
@@ -67,7 +67,7 @@ casa_scimath
 
 install (TARGETS casa_lattices
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/meas/CMakeLists.txt b/meas/CMakeLists.txt
index 142667b..d517be9 100644
--- a/meas/CMakeLists.txt
+++ b/meas/CMakeLists.txt
@@ -16,7 +16,7 @@ target_link_libraries (casa_meas casa_measures)
 
 install (TARGETS casa_meas
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/measures/CMakeLists.txt b/measures/CMakeLists.txt
index 6cfc916..3b88f9c 100644
--- a/measures/CMakeLists.txt
+++ b/measures/CMakeLists.txt
@@ -69,7 +69,7 @@ add_subdirectory (apps)
 install (
 TARGETS casa_measures
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/mirlib/CMakeLists.txt b/mirlib/CMakeLists.txt
index 7f67c4e..0c18c02 100644
--- a/mirlib/CMakeLists.txt
+++ b/mirlib/CMakeLists.txt
@@ -22,7 +22,7 @@ target_link_libraries (casa_mirlib casa_casa)
 install (
 TARGETS casa_mirlib
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/ms/CMakeLists.txt b/ms/CMakeLists.txt
index 242df42..4d2052a 100644
--- a/ms/CMakeLists.txt
+++ b/ms/CMakeLists.txt
@@ -146,7 +146,7 @@ add_subdirectory (apps)
 
 install (TARGETS casa_ms
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/msfits/CMakeLists.txt b/msfits/CMakeLists.txt
index 3ec9fc3..ea4d1c6 100644
--- a/msfits/CMakeLists.txt
+++ b/msfits/CMakeLists.txt
@@ -30,7 +30,7 @@ add_subdirectory (apps)
 
 install (
 TARGETS casa_msfits
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/scimath/CMakeLists.txt b/scimath/CMakeLists.txt
index 4e0b09c..6e90d02 100644
--- a/scimath/CMakeLists.txt
+++ b/scimath/CMakeLists.txt
@@ -38,7 +38,7 @@ endif (FFTW3_FOUND)
 
 install (TARGETS casa_scimath
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_WRITE GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/scimath_f/CMakeLists.txt b/scimath_f/CMakeLists.txt
index 08ed944..afb7b84 100644
--- a/scimath_f/CMakeLists.txt
+++ b/scimath_f/CMakeLists.txt
@@ -34,7 +34,7 @@ target_link_libraries (casa_scimath_f casa_tables ${LAPACK_LIBRARIES} ${BLAS_LIB
 
 install (
 TARGETS casa_scimath_f
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
diff --git a/tables/CMakeLists.txt b/tables/CMakeLists.txt
index 7d0e4d2..1a56333 100644
--- a/tables/CMakeLists.txt
+++ b/tables/CMakeLists.txt
@@ -174,7 +174,7 @@ add_subdirectory (apps)
 
 install (TARGETS casa_tables
 RUNTIME DESTINATION bin
-LIBRARY DESTINATION lib
+LIBRARY DESTINATION ${LIBRARY_OUTPUT_PATH}
 ARCHIVE DESTINATION lib
 LIBRARY PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
 )
